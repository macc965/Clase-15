<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="robots" content="noindex, nofollow" />
        <title>Filipinas: Vivir en el Cinturón de Fuego</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,700;0,900;1,300&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet" />
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
        
        <style>
            /* --- ESTILO GENERAL (Inspirado en SCMP/Reuters) --- */
            :root {
                --figura: #222;
                --fondo: #fdfdfd; /* Un blanco hueso muy sutil, más papel */
                --acento: #c41230; /* Rojo periodístico fuerte */
                --gris: #666;
            }

            * { margin: 0; padding: 0; box-sizing: border-box; }

            body {
                font-family: "Roboto", sans-serif; /* Cuerpo de texto limpio */
                font-weight: 300;
                line-height: 1.6;
                background: var(--fondo);
                color: var(--figura);
            }

            /* --- HEADER ESTILO "SIN CITY" (Punto 1.0 Visual) --- */
            header {
                width: 100%;
                min-height: 85vh;
                display: flex;
                align-items: flex-end;
                justify-content: center;
                text-align: center;
                position: relative;
                overflow: hidden;
                border-bottom: 5px solid var(--acento);
            }

            /* Capa de imagen con filtro CSS para efecto ilustración vibrante */
            header::before {
                content: "";
                position: absolute;
                top: 0; left: 0; width: 100%; height: 100%;
                /* CARGA TU IMAGEN AQUÍ */
                background: url('img/header.jpg') center/cover no-repeat;
                /* EL TRUCO VISUAL: Alto contraste y escala de grises */
                filter: grayscale(100%) contrast(150%) brightness(90%);
                z-index: -2;
            }

            /* Capa de trama o color para dar el toque "vibrante" o novela gráfica */
            header::after {
                content: "";
                position: absolute;
                top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.3); /* Oscurecer un poco */
                z-index: -1;
            }

            header div.titular {
                width: min(900px, 90%);
                margin-bottom: 4rem;
                color: #fff;
                text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            }

            header h1 {
                font-family: "Merriweather", serif; /* Título con serifa elegante */
                font-size: calc(3.5rem + 2vw);
                font-weight: 900;
                line-height: 1;
                margin-bottom: 1rem;
                letter-spacing: -1px;
            }

            header h5 {
                font-size: 1.2rem;
                font-weight: 400;
                letter-spacing: 1px;
                text-transform: uppercase;
                border-top: 1px solid #fff;
                display: inline-block;
                padding-top: 1rem;
                margin-bottom: 0.5rem;
            }

            header a { color: #fff; font-weight: 700; text-decoration: none; }

            /* --- MAIN LAYOUT --- */
            main {
                width: min(700px, 90%); /* Ancho de lectura tipo artículo */
                margin: 4rem auto;
            }

            @media (min-width: 1200px) {
                main { width: min(800px, 60%); }
            }

            /* --- TIPOGRAFÍA Y TEXTOS --- */
            h2 {
                font-family: "Merriweather", serif;
                font-weight: 900;
                font-size: 2.5rem;
                margin: 3rem 0 1.5rem 0;
                color: #000;
                text-align: left;
                border-left: 5px solid var(--acento);
                padding-left: 1rem;
                line-height: 1.1;
            }

            h3 {
                font-family: "Merriweather", serif;
                font-size: 1.5rem;
                font-weight: 700;
                margin: 2rem 0 0.5rem 0;
                color: #333;
                text-align: left;
            }

            p { margin-bottom: 1.5rem; font-size: 1.1rem; color: #333; text-align: justify;}

            p.lead {
                font-size: 1.4rem;
                font-family: "Merriweather", serif;
                font-weight: 300;
                font-style: italic;
                color: #444;
                line-height: 1.6;
                border-bottom: 1px solid #ddd;
                padding-bottom: 2rem;
                margin-bottom: 2rem;
            }

            /* Destacados en texto */
            p em { background: #ffffaa; padding: 0 2px; font-style: normal; font-weight: 400;}
            
            /* Estilo para la magnitud en texto */
            span.mag-badge {
                background-color: var(--acento);
                color: white;
                padding: 2px 6px;
                border-radius: 3px;
                font-weight: bold;
                font-size: 0.9em;
            }

            /* --- IMÁGENES Y FIGURAS --- */
            figure {
                width: 100%;
                margin: 2.5rem 0;
            }

            figure img {
                width: 100%;
                height: auto;
                display: block;
                filter: sepia(20%) contrast(110%); /* Pequeño filtro para uniformar fotos históricas */
            }

            figure figcaption {
                font-size: 0.85rem;
                color: var(--gris);
                font-family: "Roboto", sans-serif;
                margin-top: 0.5rem;
                border-left: 1px solid var(--gris);
                padding-left: 0.5rem;
            }

            /* Mapas e Ilustraciones aisladas */
            .grafico-central {
                width: 100%;
                max-width: 500px;
                display: block;
                margin: 3rem auto;
            }

            /* --- TABLAS --- */
            table {
                width: 100%;
                border-collapse: collapse;
                margin: 2rem 0;
                font-size: 0.9rem;
                font-family: "Roboto", sans-serif;
            }
            th {
                text-transform: uppercase;
                letter-spacing: 1px;
                font-size: 0.75rem;
                border-bottom: 2px solid #000;
                padding: 0.5rem;
            }
            td {
                border-bottom: 1px solid #ddd;
                padding: 0.75rem 0.5rem;
            }
            th svg { width: 1rem; height: 1rem; fill: var(--acento); margin-right: 5px; vertical-align: text-bottom;}

            /* --- MAPA LEAFLET --- */
            div.mapas {
                width: 100%;
                height: 500px;
                margin: 2rem 0;
                background: #eee;
                z-index: 1;
            }

            /* --- SVG COMPARACIÓN --- */
            #viz {
                margin: 2rem auto;
                display: block;
                max-width: 100%;
            }

            /* --- FUENTES Y FOOTER --- */
            .fuentes {
                background: #f0f0f0;
                padding: 2rem;
                margin-top: 4rem;
                font-size: 0.85rem;
            }
            .fuentes h4 { margin-bottom: 1rem; font-weight: 700; text-transform: uppercase;}
            .fuentes a { color: var(--acento); text-decoration: none; font-weight: bold;}

            footer {
                text-align: center;
                padding: 3rem;
                background: #222;
                color: #fff;
                font-size: 0.8rem;
            }
            footer a { color: #fff; border-bottom: 1px solid #fff;}

            /* Utilidades */
            .escondido { display: none; }
            
            /* Timeline Objects */
            main object { width: 100%; margin: 2rem 0; }
            .mobile-only { display: block; }
            .desktop-only { display: none; }
            @media (min-width: 768px) {
                .mobile-only { display: none; }
                .desktop-only { display: block; }
            }
        </style>
    </head>
    <body>
        <svg xmlns="http://www.w3.org/2000/svg" class="escondido">
            <symbol id="location" viewBox="0 0 100 100"><path d="M36.73,36.09a13,13,0,0,0,13,12.67A12.65,12.65,0,0,0,62.44,36.09a13.22,13.22,0,0,0-9.59-12.67v-18A31.37,31.37,0,0,1,81.14,36.58a30.89,30.89,0,0,1-4.55,16.36l-25,41.21H47.93L23,52.94A31.36,31.36,0,0,1,46.7,5.46v18A13.41,13.41,0,0,0,36.73,36.09Z"></path></symbol>
            <symbol id="time" viewBox="0 0 100 100"><path d="M15.44,49H6.33a43.68,43.68,0,0,1,87.34,0L89.24,52.1,84.56,49a34.57,34.57,0,0,0-69.12,0Zm1.84,29.77A44.16,44.16,0,0,1,6.83,56.65h9.22a33.86,33.86,0,0,0,7.63,15.62Zm5.66,5.41,6.4-6.52A34.17,34.17,0,0,0,46.19,84.2v9.22A42.43,42.43,0,0,1,22.94,84.2ZM86.53,64.64,54.31,47.91V25.16H47.05V52.22l36,18.94ZM77.55,84a43.22,43.22,0,0,1-23.61,9.47V84.2a32.11,32.11,0,0,0,17-6.77Z"></path></symbol>
            <symbol id="magnitude" viewBox="0 0 100 100"><path d="M5.47,58.58H17A44.19,44.19,0,0,0,5.47,82.93Zm17.84,0h7.62l-3.56-35.8,13.4-5.66V30.65l12.06,4.8-4.06,22A31.82,31.82,0,0,0,18.39,89.08H9.53A40.25,40.25,0,0,1,23.31,58.58ZM50,61.9A27.18,27.18,0,0,1,77.18,89.08h-9a18.27,18.27,0,1,0-36.53,0H22.82A27.18,27.18,0,0,1,50,61.9Zm0,13.28a13.86,13.86,0,0,1,13.78,13.9H54.92a4.92,4.92,0,0,0-9.84,0h-9A14,14,0,0,1,50,75.18Zm8.24-16.6a35.85,35.85,0,0,0-5.29-1L57.5,32.87,45,28V15.28l4.42-1.85L69.56,18.6l3.81,40h3.32a40.25,40.25,0,0,1,13.78,30.5H81.61A31.68,31.68,0,0,0,58.24,58.58Zm24.72,0H94.53V82.93A45.16,45.16,0,0,0,83,58.58Z"></path></symbol>
            <symbol id="tsunami" viewBox="0 0 100 100"><path d="M91.33,88.22H8.92c-2.22,0-3.57-1.23-3.57-3a4.63,4.63,0,0,1,.61-2L17.77,62.51c5.17-9,16.36-13.9,27.06-13.9,11.57,0,17.35,5.54,17.35,10.46,0,4.3-3.32,7.13-6.77,8.12H53.07a3.49,3.49,0,0,0-3.56-3.82,3.42,3.42,0,0,0-3.32,3.45c0,3.81,4.79,7.5,13.16,7.5,7.75,0,18-3.57,24.6-9.1L94.28,83.3a3.51,3.51,0,0,1,.37,1.84A3,3,0,0,1,91.33,88.22Zm-10.21-28L52.71,10.36a3.19,3.19,0,0,0-5.66,0L26.14,47.51a36.15,36.15,0,0,1,12.67-4.06L49.88,23.89,73.37,64.36A19.72,19.72,0,0,0,81.12,60.17Z"></path></symbol>
        </svg>

        <header>
            <div class="titular">
                <h1>FILIPINAS</h1>
                <h5>Vivir en el Cinturón de Fuego</h5>
                <h6>Por <a href="#">Matias Chavez</a> y <a href="#">Nicole Cerpa<a/> | 25 de Noviembre, 2025</h6>
            </div>
        </header>

        <main>
            <p class="lead">
                Filipinas es mucho más que sus playas paradisíacas. Este archipiélago de más de 7.600 islas se asienta sobre una de las zonas geológicas más complejas y volátiles del planeta. Su historia no se ha escrito solo con tinta, sino con el movimiento violento de la tierra.
            </p>

            <img src="img/pais-aislado.png" class="grafico-central" alt="Mapa minimalista de Filipinas">

            <p>
                La razón de esta inestabilidad es su ubicación privilegiada y peligrosa en el borde occidental del famoso <em>Cinturón de Fuego del Pacífico</em>. Esta herradura de 40.000 kilómetros concentra el 90% de los terremotos del mundo. Filipinas está atrapada entre la placa Euroasiática y la Placa del Mar de Filipinas, una receta geológica para el desastre constante.
            </p>

            <img src="img/cinturon.png" class="grafico-central" alt="Ubicación de Filipinas en el Cinturón de Fuego">

            <p>
                A lo largo de las décadas, esta realidad tectónica ha cobrado miles de vidas y remodelado ciudades enteras. A continuación, un recorrido visual por tres de los eventos sísmicos que definieron la memoria moderna del país.
            </p>

            <object data="img/timeline-desktop.svg" class="desktop-only" type="image/svg+xml"></object>
            <object data="img/timeline-mobile.svg" class="mobile-only" type="image/svg+xml"></object>

            <h3>1976: La tragedia del Golfo de Moro</h3>
            <p>Poco después de la medianoche del 17 de agosto, un sismo de magnitud <span class="mag-badge">8.0</span> sacudió la isla de Mindanao. Sin embargo, el terror real llegó minutos después: un tsunami con olas de hasta 9 metros de altura barrió más de 700 kilómetros de costa.</p>
            <figure>
                <img src="img/1976.jpg" alt="Devastación tras el tsunami de 1976">
                <figcaption>Residentes observan los daños costeros en Mindanao. (Fuente: Wikimedia Commons)</figcaption>
            </figure>
            <p>Es considerado el desastre geofísico más letal en la historia de Filipinas, con estimaciones de hasta <em>8.000 fallecidos</em>. El evento transformó para siempre los sistemas de alerta de tsunamis en la región.</p>

            <h3>1990: El colapso de Luzón</h3>
            <p>El 16 de julio, la isla más poblada del país fue golpeada por un terremoto de magnitud <span class="mag-badge">7.7</span>. La ciudad turística de Baguio quedó aislada del mundo exterior durante días debido a los deslizamientos de tierra.</p>
            <figure>
                <img src="img/1990.jpg" alt="El hotel Hyatt Terraces colapsado en Baguio">
                <figcaption>El Hotel Hyatt Terraces colapsado en Baguio. (Fuente: U.S. Geological Survey)</figcaption>
            </figure>
            <p>La imagen del lujoso <em>Hotel Hyatt Terraces</em> reducido a escombros se convirtió en el símbolo de la fragilidad de la infraestructura ante la fuerza de la naturaleza. Más de 1.600 personas perdieron la vida.</p>

            <h3>2013: La destrucción de Bohol</h3>
            <p>En octubre de 2013, un sismo de magnitud <span class="mag-badge">7.2</span> golpeó la provincia de Bohol. A diferencia de otros eventos, este terremoto fue famoso por destruir patrimonio histórico invaluable: iglesias coloniales españolas de siglos de antigüedad se derrumbaron en segundos.</p>
            <figure>
                <img src="img/2013.jpg" alt="Iglesia colonial destruida en Bohol">
                <figcaption>Ruinas de la iglesia de Loboc, construida en el siglo XVII. (Fuente: Wikimedia Commons)</figcaption>
            </figure>

            <h2>Actividad sísmica en tiempo real</h2>
            <p>Filipinas nunca duerme. La actividad tectónica es diaria. A continuación, se presentan los datos en vivo de los últimos 30 días, filtrando aquellos eventos significativos superiores a magnitud 4.0, provenientes de la base de datos del USGS.</p>

            <table>
                <thead>
                    <tr>
                        <th><svg><use href="#location"></use></svg> Lugar</th>
                        <th><svg><use href="#time"></use></svg> Fecha</th>
                        <th><svg><use href="#magnitude"></use></svg> Mag</th>
                        <th><svg><use href="#tsunami"></use></svg> Alerta</th>
                    </tr>
                </thead>
                <tbody id="ph-table"></tbody>
            </table>

            <div class="mapas" id="mapaPH"></div>

            <h3>Filipinas en contexto global</h3>
            <p>Comparación de registros sísmicos (M 4.0+) del último mes entre Filipinas, Japón y Chile.</p>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 50" id="viz"></svg>

            <h3>Hacia una cultura del riesgo</h3>
            <p>
                La historia sísmica de Filipinas nos enseña que los terremotos son inevitables, pero los desastres no tienen por qué serlo. Como señala la UNDRR, <em>"no existen los desastres naturales"</em>, solo amenazas naturales que se cruzan con decisiones humanas vulnerables.
            </p>
            <p>
                La clave para el futuro no es solo la ingeniería antisísmica, sino la educación y la memoria histórica. Entender que vivimos sobre un suelo en movimiento es el primer paso para construir una sociedad resiliente, tal como se busca promover en legislaciones modernas de gestión de riesgo a nivel global.
            </p>

            <div class="fuentes">
                <h4>Referencias y Fuentes:</h4>
                <p>USGS Earthquake Hazards Program. <a href="https://www.usgs.gov/" target="_blank">Link</a></p>
                <p>PHIVOLCS (Philippine Institute of Volcanology and Seismology). <a href="https://www.phivolcs.dost.gov.ph/" target="_blank">Link</a></p>
                <p>UNDRR: Los desastres no son naturales. <a href="https://www.undrr.org/es/news/el-poder-de-las-palabras-los-desastres-no-son-naturales" target="_blank">Link</a></p>
                <p>Wikipedia Commons (Imágenes históricas). <a href="https://commons.wikimedia.org/" target="_blank">Link</a></p>
            </div>
        </main>

        <footer>
            <p>Desarrollado para <a href="#" target="_blank">Diseño y visualización de información | Universidad de Chile</a> &copy; 2025</p>
        </footer>

<script>
            // --- SCRIPT DEPURADO Y ROBUSTO ---

            // 1. Referencias a elementos (Con verificación)
            // Buscamos la tabla con el ID "ph-table". Si no existe, intentamos con "cl" o "jp" por si acaso.
            const tabla = document.getElementById("ph-table") || document.getElementById("cl") || document.getElementById("jp");
            const viz = document.getElementById("viz");
            
            // 2. Coordenadas de Filipinas
            const latPH = 12.8797;
            const lonPH = 121.7740;

            // 3. Contadores
            var conteoPH = 0;
            var conteoJP = 0;
            var conteoCL = 0;

            async function datos(url) {
                try {
                    // Mensaje de carga
                    if(viz) viz.innerHTML = '<text x="50" y="25" text-anchor="middle" font-family="sans-serif">Cargando datos...</text>';

                    let consulta = await fetch(url);
                    let data = await consulta.json();
                    let temblores = data.features;

                    // Configuración Mapa (Solo si existe el contenedor "mapaPH")
                    if(document.getElementById("mapaPH")) {
                        const mapa = L.map("mapaPH").setView([latPH, lonPH], 5);
                        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                            attribution: '&copy; OpenStreetMap, &copy; CARTO',
                            maxZoom: 19
                        }).addTo(mapa);

                        var redIcon = new L.Icon({
                            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
                            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
                            iconSize: [25, 41],
                            iconAnchor: [12, 41],
                            popupAnchor: [1, -34],
                            shadowSize: [41, 41]
                        });

                        // Bucle para marcadores y tabla
                        temblores.forEach((t) => {
                            let mag = t.properties.mag;
                            let place = t.properties.place;
                            if (mag >= 4.0 && place.includes("Philippines")) {
                                L.marker([t.geometry.coordinates[1], t.geometry.coordinates[0]], {icon: redIcon})
                                .addTo(mapa)
                                .bindPopup(`<b>${place}</b><br>Magnitud: ${mag}`);
                            }
                        });
                    }

                    // 4. Bucle de Conteo (Independiente del mapa)
                    temblores.forEach((t) => {
                        let mag = t.properties.mag;
                        let place = t.properties.place;
                        if (mag === null) mag = 0;

                        if (mag >= 4.0) {
                            // FILIPINAS
                            if (place.includes("Philippines")) {
                                conteoPH++;
                                // Llenar tabla si existe
                                if(tabla) {
                                    tabla.innerHTML += `<tr>
                                        <td><a href="${t.properties.url}" target="_blank">${place}</a></td>
                                        <td>${new Date(t.properties.time).toLocaleDateString()}</td>
                                        <td><span style="background:#c41230;color:white;padding:2px 6px;border-radius:3px;font-weight:bold">${mag}</span></td>
                                        <td>${t.properties.tsunami == 1 ? "⚠️ Sí" : "No"}</td>
                                    </tr>`;
                                }
                            }
                            // JAPÓN
                            if (place.includes("Japan")) conteoJP++;
                            // CHILE
                            if (place.includes("Chile")) conteoCL++;
                        }
                    });

                    // 5. DIBUJAR EL GRÁFICO SVG
                    // TRUCO: Si el conteo es 0, usamos radio 3 para que se vea un puntito gris, si no, la raíz cuadrada.
                    // TRUCO 2: Si el conteo es 0, el texto será gris oscuro, si no, blanco.
                    
                    const rPH = conteoPH > 0 ? Math.sqrt(conteoPH) : 3;
                    const colorTextoPH = conteoPH > 0 ? "white" : "#333";
                    const colorFondoPH = conteoPH > 0 ? "#c41230" : "#eee";

                    const rJP = conteoJP > 0 ? Math.sqrt(conteoJP) : 3;
                    const colorTextoJP = conteoJP > 0 ? "white" : "#333";
                    const colorFondoJP = conteoJP > 0 ? "#666" : "#eee";

                    const rCL = conteoCL > 0 ? Math.sqrt(conteoCL) : 3;
                    const colorTextoCL = conteoCL > 0 ? "white" : "#333";
                    const colorFondoCL = conteoCL > 0 ? "#666" : "#eee";

                    if(viz) {
                        viz.innerHTML = `
                            <g transform="translate(15)">
                                <circle cx="10" cy="25" r="${rPH}" fill="${colorFondoPH}"></circle>
                                <text x="10" y="25" font-family="Roboto, sans-serif" font-weight="bold" font-size="3" dominant-baseline="middle" text-anchor="middle" fill="${colorTextoPH}">${conteoPH}</text>
                                <text x="10" y="45" font-family="Merriweather, serif" font-size="3" text-anchor="middle" fill="#000">Filipinas</text>
                            </g>
                            
                            <g transform="translate(45)">
                                <circle cx="10" cy="25" r="${rJP}" fill="${colorFondoJP}"></circle>
                                <text x="10" y="25" font-family="Roboto, sans-serif" font-weight="bold" font-size="3" dominant-baseline="middle" text-anchor="middle" fill="${colorTextoJP}">${conteoJP}</text>
                                <text x="10" y="45" font-family="Merriweather, serif" font-size="3" text-anchor="middle" fill="#000">Japón</text>
                            </g>

                            <g transform="translate(75)">
                                <circle cx="10" cy="25" r="${rCL}" fill="${colorFondoCL}"></circle>
                                <text x="10" y="25" font-family="Roboto, sans-serif" font-weight="bold" font-size="3" dominant-baseline="middle" text-anchor="middle" fill="${colorTextoCL}">${conteoCL}</text>
                                <text x="10" y="45" font-family="Merriweather, serif" font-size="3" text-anchor="middle" fill="#000">Chile</text>
                            </g>
                        `;
                    }

                } catch (error) {
                    console.error("Error:", error);
                    if(viz) viz.innerHTML = '<text x="50" y="25" text-anchor="middle" fill="red">Error al cargar datos</text>';
                }
            }

            datos("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_month.geojson");
        </script>
    </body>
</html>